<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dashboard - Offline Cricket App</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#111;color:#fff;}
.container{max-width:600px;margin:50px auto;padding:20px;background:#222;border-radius:8px;}
h2,h3{text-align:center;margin-bottom:20px;}
input,button{width:100%;padding:10px;margin:8px 0;border-radius:4px;border:none;}
button{background:#006400;color:#fff;font-weight:bold;cursor:pointer;}
button:hover{opacity:0.85;}
.match-list{margin-top:20px;}
.match-item{padding:10px;background:#333;margin:5px 0;border-radius:4px;display:flex;justify-content:space-between;align-items:center;}
.match-item span{flex:1;}
.match-item button{flex:0 0 100px;margin-left:5px;}
.deleteBtn{background:#8B0000;}
</style>
</head>
<body>

<div class="container">
<h2>Dashboard</h2>

<h3>Create New Match</h3>
<input type="text" id="matchName" placeholder="Match Name">
<input type="text" id="team1Name" placeholder="Team 1 Name">
<input type="text" id="team2Name" placeholder="Team 2 Name">
<button onclick="createMatch()">Create Match</button>

<h3>Existing Matches</h3>
<div class="match-list" id="matchList"></div>
</div>

<script>
// -------------------- LOCALSTORAGE --------------------
function getMatches(){return JSON.parse(localStorage.getItem('matches')||'[]');}
function saveMatches(matches){localStorage.setItem('matches',JSON.stringify(matches));}

// -------------------- LOAD MATCHES --------------------
function loadMatches(){
    const list=document.getElementById('matchList');
    list.innerHTML='';
    const matches=getMatches();
    matches.forEach((m,i)=>{
        const div=document.createElement('div');
        div.className='match-item';

        const span = document.createElement('span');
        span.innerText=`${m.name}: ${m.team1} vs ${m.team2}`;
        div.appendChild(span);

        // Match View button
        const viewBtn=document.createElement('button');
        viewBtn.innerText="Match View";
        viewBtn.onclick=()=>openMatchView(i);
        div.appendChild(viewBtn);

        // Scoreboard button
        const scoreBtn=document.createElement('button');
        scoreBtn.innerText="Scoreboard";
        scoreBtn.onclick=()=>openScoreboard(i);
        div.appendChild(scoreBtn);

        // Delete button
        const delBtn=document.createElement('button');
        delBtn.innerText="Delete";
        delBtn.className="deleteBtn";
        delBtn.onclick=()=>deleteMatch(i);
        div.appendChild(delBtn);

        list.appendChild(div);
    });
}

// -------------------- CREATE MATCH --------------------
function createMatch(){
    const name=document.getElementById('matchName').value.trim();
    const t1=document.getElementById('team1Name').value.trim();
    const t2=document.getElementById('team2Name').value.trim();
    if(!name || !t1 || !t2){alert("Please fill all fields"); return;}
    const matches=getMatches();
    matches.push({name:name,team1:t1,team2:t2});
    saveMatches(matches);
    document.getElementById('matchName').value='';
    document.getElementById('team1Name').value='';
    document.getElementById('team2Name').value='';
    loadMatches();
}

// -------------------- OPEN SCOREBOARD --------------------
function openScoreboard(index){
    localStorage.setItem('currentMatchIndex', index);
    window.location.href='scoreboard.html';
}

// -------------------- OPEN MATCH VIEW --------------------
function openMatchView(index){
    localStorage.setItem('currentMatchIndex', index);
    window.location.href='matchView.html';
}

// -------------------- DELETE MATCH --------------------
function deleteMatch(index){
    if(confirm("Are you sure you want to delete this match?")){
        const matches = getMatches();
        matches.splice(index,1);
        saveMatches(matches);
        loadMatches();
    }
}

// Load matches on page load
loadMatches();
</script>

</body>
</html>
